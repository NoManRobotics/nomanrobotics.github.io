---
layout: page
title:
permalink: "/techsupport/"
comments: false
---

<style>
/* 参数表格 */
.param-table {
    width: 100%;
    border-collapse: collapse;
    margin: 15px 0;
    background: #fff;
}

section[id] {
    scroll-margin-top: 100px; /* 调整这个值来控制滚动停止位置 */
}

.param-table th,
.param-table td {
    padding: 12px 15px;
    border: 1px solid #e9ecef;
}

.param-table th {
    background: #f8f9fa;
    font-weight: 600;
}

/* 代码块 */
pre {
    background: #f8f9fa;
    border-radius: 4px;
    padding: 15px;
    margin: 15px 0;
    overflow-x: auto;
    position: relative;
}

code {
    font-family: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    font-size: 14px;
}

/* 警告框 */
.alert {
    padding: 15px 20px;
    margin: 15px 0;
    border-radius: 4px;
    border-left: 4px solid;
}

.alert-warning {
    background: #fff3cd;
    border-left-color: #ffc107;
    color: #856404;
}

.alert-info {
    background: #d1ecf1;
    border-left-color: #17a2b8;
    color: #0c5460;
}

/* 容器布局 */
.techsupport-container {
    display: flex;
    width: 100%;
    max-width: 1400px;
    margin: 0 auto;
    position: relative;
    gap: 30px;
}

/* 导航栏样式 */
.idocs-navigation {
    position: sticky;
    top: 100px;
    height: calc(100vh - 100px);
    overflow-y: auto;
    flex: 0 0 250px; /* 固定宽度 */
    max-width: 250px; /* 最大宽度 */
    padding-right: 15px;
    z-index: 1000;
}

/* 内容区域样式 */
.idocs-content {
    flex: 1;
    min-width: 0;
    overflow-x: hidden;
    padding-right: 1px;
}

/* 内容容器样式 */
.idocs-content .container {
    max-width: 100%;
    padding: 0;
}

/* 响应式设计 */
@media (max-width: 768px) {
    .techsupport-container {
        flex-direction: column;
    }
    
    .idocs-navigation {
        position: fixed;
        left: -250px;
        transition: left 0.3s ease;
        background: white;
        box-shadow: 2px 0 5px rgba(0,0,0,0.1);
    }
    
    .idocs-navigation.active {
        left: 0;
    }
    
    .nav-toggle {
        display: block;
        position: fixed;
        top: 100px;
        left: 20px;
        z-index: 1001;
    }
}

/* 响应式调整 */
@media (min-width: 1600px) {
    .techsupport-container {
        max-width: 1600px;
    }
}

/* 隐藏移动端菜单按钮（在桌面端） */
.nav-toggle {
    display: none;
}
</style>

<body data-spy="scroll" data-target=".idocs-navigation" data-offset="100">

<div class="techsupport-container">
    <!-- 添加导航切换按钮 -->
    <button class="nav-toggle d-md-none">菜单</button>

    <!-- Sidebar Navigation -->
    <div class="idocs-navigation bg-light">
        <ul class="nav flex-column">
            <li class="nav-item"><a class="nav-link active" href="#item_1">Carbonara</a>
                <ul class="nav flex-column">
                    <li class="nav-item"><a class="nav-link" href="#item_1_1">用户手册</a></li>
                    <li class="nav-item"><a class="nav-link" href="#item_1_2">软件下载</a></li>
                    <li class="nav-item"><a class="nav-link" href="#item_1_3">ROS</a></li>
                    <li class="nav-item"><a class="nav-link" href="#item_1_4">ROS2</a></li>
                </ul>
            </li>
            <li class="nav-item"><a class="nav-link" href="#item_2">Carbonara 示教器</a>
                <ul class="nav flex-column">
                    <li class="nav-item"><a class="nav-link" href="#controller">Controller</a></li>
                    <li class="nav-item"><a class="nav-link" href="#anytroller">Anytroller</a></li>
                    <li class="nav-item"><a class="nav-link" href="#ros">ROS</a></li>
                    <li class="nav-item"><a class="nav-link" href="#kinematics">Kinematics</a></li>
                    <li class="nav-item"><a class="nav-link" href="#firmware">Firmware</a></li>
                </ul>
            </li>
            <li class="nav-item"><a class="nav-link" href="#item_3">Change Log</a></li>
        </ul>
    </div>
  
    <!-- Docs Content -->
    <div class="idocs-content">
        <div class="container"> 
            <!-- Item 1 -->
            <section id="item_1">
                <h1>Carbonara</h1>
                <p>Carbonara是一款五轴舵机机械臂,它的制造相对于工业机械臂来说成本较低。但是作为教育级用途, 我们希望能够通过Carbonara让大家快速上手并了解机械臂的完整工作流程。</p>
                <img src="/assets/images/robot_arm_system.png" alt="Carbonara机械臂系统架构" class="img-fluid" style="max-width: 450px; display: block; margin-left: auto; margin-right: auto; padding: 20px 0;">
                <p>工业机械臂平台架构主要包括机械臂本体、电源供应、控制器、传感器和中央处理器（电脑）。我们的教育机械臂展现了工业机械臂的核心组成部分，但采用了更经济实惠的替代方案：</p>
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th>系统组成</th>
                            <th>工业机械臂</th>
                            <th>Carbonara教育机械臂</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>电源系统</td>
                            <td>三相高压电源(380V/220V)驱动大功率伺服电机</td>
                            <td>6V直流电源驱动舵机</td>
                        </tr>
                        <tr>
                            <td>通讯协议</td>
                            <td>CAN总线或EtherCAT等工业级通讯协议</td>
                            <td>I2C协议</td>
                        </tr>
                        <tr>
                            <td>控制系统</td>
                            <td>专业的PLC或工控机</td>
                            <td>ESP32微控制器</td>
                        </tr>
                        <tr>
                            <td>驱动系统</td>
                            <td>伺服电机、减速器和专业驱动器</td>
                            <td>集成驱动电路的数字舵机</td>
                        </tr>
                        <tr>
                            <td>计算机系统</td>
                            <td>专业优化的操作系统</td>
                            <td>普通家用电脑</td>
                        </tr>
                    </tbody>
                </table>
                
                <p>本页面将指导您完成从环境准备到实际操作Carbonara的各项流程。</p>
                <h4>快速导航：</h4>
                <ul>
                    <li>Carbonara
                        <ul>
                            <li><a href="#item_1_1">用户手册</a></li>
                            <li><a href="#item_1_2">软件下载</a></li>
                            <li><a href="#item_1_3">ROS配置指南</a></li>
                            <li><a href="#item_1_4">ROS2配置指南</a></li>
                        </ul>
                    </li>
                    <li><a href="#item_2">Carbonara 示教器</a>
                        <ul>
                            <li><a href="#controller">Controller</a></li>
                            <li><a href="#anytroller">Anytroller</a></li>
                            <li><a href="#ros">ROS</a></li>
                            <li><a href="#kinematics">Kinematics</a></li>
                            <li><a href="#firmware">Firmware</a></li>
                        </ul>
                    </li>
                </ul>
            </section>
            <hr class="divider">
            <!-- Item 1.1 -->
            <section id="item_1_1">
                <h3>用户手册</h3>
                
                <h4>1. 产品参数</h4>
                <ul>
                    <li>精度: ±0.1mm</li>
                    <li>工作电压: 6V DC</li>
                    <li>自由度: 5轴</li>
                    <li>主要材料: ABS (FDM)</li>
                    <li>通讯方式: USB串口/支持wifi,蓝牙拓展</li>
                    <li>电机: 高精度金属舵机</li>
                    <li>最大负载: 500g</li>
                    <li>工作范围: 半径约150mm</li>
                </ul>

                <h4>2. 装配</h4>
                <p>请安装详细装配图对机械臂进行安装：<a href="" target="_blank" style="text-decoration: underline; color: purple;">下载装配图</a></p>
                <p>请根据电路图对内部电路进行确认和维护: <a href="" target="_blank" style="text-decoration: underline; color: purple;">下载电路图</a></p>
                
                <h4>3. 注意事项</h4>
                <ul>
                    <li>使用前请仔细阅读说明书，确保正确连接所有部件。</li>
                    <li>首次使用时，请使用我们的软件进行校准，并确保所有关节运动正常。</li>
                    <li>请勿超过最大负载限制，以免损坏电机或机械结构。</li>
                    <li>在进行任何维护或调整之前，请务必断开电源。</li>
                    <li>使用过程中如遇到异常情况，请先尝试重启机械臂（包括断电重启和软件内重启）。</li>
                    <li>请将机械臂放置在平稳的表面上使用，避免意外跌落。</li>
                    <li>本产品面向青少年和成人，儿童使用时需有成人监督。</li>
                </ul>

                <p>如需更多详细信息或技术支持，请联系我们的客户服务团队。</p>
            </section>
            <hr class="divider">
      
            <!-- Item 1.2 -->
            <section id="item_1_2">
                <h3>软件下载</h3>
                <p>如果您不使用电位器控制器，可以下载我们提供的示教器软件来控制 Carbonara 机械臂。我们为不同操作系统提供了相应的软件版本。</p>
                
                <h4>上位机软件下载</h4>
                <ul>
                    <li><strong>Windows：</strong> <a href="#" target="_blank" style="text-decoration: underline; color: purple;">下载 Windows 版本</a></li>
                    <li><strong>macOS：</strong> <a href="#" target="_blank" style="text-decoration: underline; color: purple;">下载 macOS 版本</a></li>
                    <li><strong>Linux：</strong> <a href="#" target="_blank" style="text-decoration: underline; color: purple;">下载 Linux 版本</a></li>
                </ul>

                <h4>使用说明</h4>
                <p>下载并安装适合您操作系统的版本后，请参考软件内的使用说明进行操作。如遇到任何问题，请查看我们的<a href="#" target="_blank" style="text-decoration: underline; color: purple;">常见问题解答</a>或联系我们的技术支持。</p>

                <h4>机械臂主控固件</h4>
                <p><strong>注意：</strong>机械臂主控固件已预先安装在您的机械臂中，用户通常无需自行下载或安装。如果您需要重新安装固件或进行手动更新，可以从以下链接下载最新版本的固件：<a href="https://github.com/NoManRobotics/Carbonara-releases" target="_blank" style="text-decoration: underline; color: purple;">下载 Carbonara 机械臂固件</a></p>
                
                <p>我们建议通过示教器软件自动烧录固件。只需在示教器软件中找到"固件"选项，然后按照提示进行操作烧录最新固件。</p>
            </section>
            <hr class="divider">

            <!-- Item 1.3 -->
            <section id="item_1_3">
                <h3>ROS</h3>
                <h3>Step 1: 准备您的环境</h3>
                <p>ROS版本对应固定的Ubuntu版本。本机械臂在Ubuntu 20.04 LTS环境下使用ROS noetic开发,以下说明和教程安装均在ROS noetic下完成。您可以在虚拟机(VirtualBox, Vmware Workstation Pro等)或者物理Ubuntu系统下安装<a href="https://releases.ubuntu.com/focal/" target="_blank" style="text-decoration: underline;">镜像文件</a>。</p>
                <p>通常情况下,安装物理的Ubuntu系统是更好的选择,因为在虚拟机中,3D加速和USB设备的支持会受到限制。</p>
                <p><strong>注意：</strong>您可以在树莓派上安装ROS,但不幸的是,它的性能不足以运行Rviz中的模拟,更不用说Gazebo了。</p>
                
                <ol>
                    <li>配置ROS环境。请按照<a href="https://github.com/NoManRobotics/ROS-setup/tree/main/ros1" target="_blank" style="text-decoration: underline;">这个快速安装指南</a>在对应Ubuntu版本上安装ROS。您需要依照每一步骤在终端下完成安装。</li>
                    <li>MoveIt!是ROS中用于移动操作的软件包。检查MoveIt!是否正常工作。运行以下命令：
                        <pre><code>roslaunch panda_moveit_config demo.launch rviz_tutorial:=true</code></pre>
                        如果您愿意,可以按照MoveIt<a href="https://docs.ros.org/en/kinetic/api/moveit_tutorials/html/doc/quickstart_in_rviz/quickstart_in_rviz_tutorial.html" target="_blank" style="text-decoration: underline;">基础教程</a>进行操作。
                    </li>
                </ol>

                <p>然后,您可以直接下载我们预处理完成的<a href="https://github.com/NoManRobotics" target="_blank" style="text-decoration: underline;">ROS workspace</a>,其中包括URDF文件和Moveit!配置包。如果想深入了解ROS机械臂配置过程,可以根据以下两步指南进行手动配置。</p>

                <h3>Step 2: Unified Robot Description Format (URDF)</h3>
                <p>我们已经为您准备好了Carbonara的统一机器人描述格式文件。您可以从我们的GitHub仓库下载这个<a href="https://github.com/NoManRobotics" target="_blank" style="text-decoration: underline;">URDF文件</a>。</p>
                <p>我们将简要介绍URDF文件的结构和内容,以帮助您更好地理解它,并在将来编写自己的URDF文件时作为参考。</p>

                <h4>连接(Links)</h4>
                <p>连接是机器人的各个部分，如手腕或平台。它们具有以下属性：</p>
                <ul>
                    <li>用于在Rviz和Gazebo中进行视觉表示。使用高质量的网格模型。</li>
                    <li>用于路径规划期间的碰撞检查。建议使用低质量的网格模型，但为了教程的目的，我们使用与视觉相同的模型。</li>
                </ul>

                <h4>关节(Joints)</h4>
                <p>URDF中的关节是链接之间的连接,描述了它们之间的相对位置和运动方式。它们具有以下属性：</p>
                <ul>
                    <li>关节的旋转方向(沿x、y或z轴)</li>
                    <li>关节的最小和最大角度（以弧度为单位）。仅适用于"revolute"类型的关节（"continuous"类型的关节没有限制，因为它们可以连续旋转）</li>
                    <li>关节相对于原点的位置</li>
                    <li>描述哪两个链接通过该关节连接</li>
                </ul>

                <h4>使用3D网格模型</h4>
                <p>如果您使用的是与我相同的机械臂,您需要将机械臂的3D网格模型复制到urdf_tutorial包文件夹中。使用以下命令:</p>
                <pre><code>sudo cp &lt;要复制的文件名&gt; /opt/ros/kinetic/share/urdf_tutorial/meshes/</code></pre>
                <p>如果您使用自己的网格模型,请确保在将它们导出为二进制STL格式之前,它们在3D建模软件中以原点(xyz 000)为中心。</p>

                <h4>在Rviz中可视化结果</h4>
                <p>现在您可以启动Rviz来可视化结果,使用以下命令:</p>
                <pre><code>&gt;roslaunch urdf_tutorial display.launch model:=arm.urdf</code></pre>
                <p>(从您刚刚创建的URDF文件所在的文件夹中启动)</p>

                <p>检查关节和链接，确保它们的旋转和位置完全符合预期。如果一切正常，请继续下一步。</p>

                <h3>Step 3: 使用MoveIt Setup Assistant创建机器人配置</h3>
                <p>现在您的URDF文件已经准备好了,是时候将它转换为机器人配置包了。</p>

                <p>使用以下命令启动MoveIt Setup Assistant:</p>
                <pre><code>&gt;roslaunch moveit_setup_assistant setup_assistant.launch</code></pre>

                <p>这个过程在MoveIt官方教程中有非常详细的描述:您可以在<a href="https://docs.ros.org/en/kinetic/api/moveit_tutorials/html/doc/setup_assistant/setup_assistant_tutorial.html" target="_blank" style="text-decoration: underline;">这里</a>找到。</p>

                <p>创建配置包后:进入您的catkin工作空间文件夹并执行以下命令来构建包:</p>
                <pre><code>&gt;catkin make
&gt;source devel/setup.bash</code></pre>

                <p>现在您可以使用以下命令启动它：</p>
                <pre><code>&gt;roslaunch my_arm_xacro demo.launch rviz_tutorial:=true</code></pre>

                <p>其中，您需要将"my_arm_xacro"更改为您的包的名称。</p>

                <h3>Step 4: 连接控制板至ROS</h3>
                <p>在我们的案例中,ESP32运行一个带有rosserial的ROS节点将作为机器人控制器。ESP32的代码附加在此步骤中,也可以在GitHub上获取。</p>

                <p>在ESP32上运行的ROS节点基本上订阅了在运行MoveIt的计算机上发布的/JointState主题,然后将数组中的关节角度从弧度转换为度,并使用ESP32的PWM功能将它们传递给伺服电机。</p>

                <p>这不是工业机器人的标准做法。理想情况下，您应该在/FollowJointState主题上发布运动轨迹,然后在/JointState主题上接收反馈。但在我们的机械臂中,舵机无法提供反馈,所以我们将直接订阅由FakeRobotController节点发布的/JointState主题。我们假设传递给电机的任何角度没有任何误差。</p>

                <p>有关rosserial如何工作的更多信息,您可以参考以下教程：</p>
                <p><a href="http://wiki.ros.org/rosserial_arduino/Tutorials" target="_blank" style="text-decoration: underline;">http://wiki.ros.org/rosserial_arduino/Tutorials</a></p>

                <p>将代码上传到ESP32后,您需要使用USB或Wi-Fi将其连接到运行ROS安装的计算机。</p>

                <p>使用USB连接至机械臂后,执行以下命令以进行串口通讯:</p>
                <pre><code>&gt;roslaunch my_arm_xacro demo.launch rviz_tutorial:=true
&gt;sudo chmod -R 777 /dev/ttyUSB0
&gt;rosrun rosserial_python serial_node.py _port:=/dev/ttyUSB0 _baud:=115200 
</code></pre>

                <p>现在,您可以使用RVIZ中的交互式标记将机器人手臂移动到某个姿势,然后按下"Plan"和"Execute"，使其实际移动到该位置。</p>

            </section>
            <hr class="divider">

            <!-- Item 1.4 -->
            <section id="item_1_4">
                <h3>ROS2</h3>
                <div class="alert alert-info">
                    <p>本节将指导您在ROS2环境下配置和使用Carbonara机械臂。我们同样使用Ubuntu 22.04 LTS但是这次安装ROS2 Humble。</p>
                    <p>根据官方教程，ROS2支持Linux和Windows系统。我们将分别对Linux和Windows系统进行配置。但是，我们仍然建议使用Linux环境。</p>
                </div>

                <h4>Linux环境配置</h4>
                <ol>
                    <li>配置ROS2环境。请按照<a href="https://github.com/NoManRobotics/ROS-setup/tree/main/ros2" target="_blank" style="text-decoration: underline;">这个快速安装指南</a>在对应Ubuntu版本上安装ROS2。您需要依照每一步骤在终端下完成安装。</li>
                    <li>MoveIt!是ROS中用于移动操作的软件包。检查MoveIt!是否配置成功。运行以下命令：
                        <pre><code>roslaunch panda_moveit_config demo.launch rviz_tutorial:=true</code></pre>
                        如果您愿意,可以按照MoveIt<a href="https://docs.ros.org/en/kinetic/api/moveit_tutorials/html/doc/quickstart_in_rviz/quickstart_in_rviz_tutorial.html" target="_blank" style="text-decoration: underline;">基础教程</a>进行操作。
                    </li>
                    <li>然后,您可以直接下载我们预处理完成的<a href="https://github.com/NoManRobotics" target="_blank" style="text-decoration: underline;">ROS2 workspace</a>,其中包括URDF文件和MoveIt2配置包。</li>
                    <li>创建配置包后，进入您的工作空间并编译：
                        <pre><code>cd ~/ros2_ws
colcon build
source install/setup.bash</code></pre>
                    </li>
                    <li>启动MoveIt2配置:
                        <pre><code>ros2 launch my_robot_moveit_config demo.launch.py</code></pre>
                    </li>
                    <li>在ROS2中，我们使用micro-ROS替代了ROS1中的rosserial。ESP32运行micro-ROS客户端，与ROS2节点进行通信。micro-ROS节点订阅<code>/joint_states</code>话题，将关节角度从弧度转换为度，并通过PWM控制舵机。有关micro-ROS的更多信息，请参考<a href="https://micro.ros.org/docs/tutorials/core/first_application_linux/" target="_blank" style="text-decoration: underline;">micro-ROS教程</a>。</li>

                    <li>通过USB物理连接机械臂:
                        <pre><code>ros2 launch my_robot_moveit_config demo.launch.py
sudo chmod 666 /dev/ttyUSB0
ros2 run micro_ros_agent micro_ros_agent serial --dev /dev/ttyUSB0 -b 115200</code></pre>
                    </li>
                    <li>现在您可以在RViz2中使用交互式标记控制机械臂，规划并执行运动。</li>
                </ol>


                <h4>Windows环境配置</h4>
                <ol>
                    <li>配置ROS2环境。在Windows系统下，我们使用<a href="https://chocolatey.org/install" target="_blank" style="text-decoration: underline;">Chocolatey</a>包管理器来安装ROS2。</li>
                    <li>打开命令提示符并输入以下命令来通过Chocolatey安装Python：
                        <pre><code>choco install -y python --version 3.8.3</code></pre>
                        <div class="alert alert-warning">
                            <p>注意：Chocolatey会将Python安装在C:\Python38目录下，后续安装步骤都假定Python安装在该位置。如果您将Python安装在其他位置，必须将其复制或链接到此位置。</p>
                        </div>
                    </li>
                    <li>安装Visual C++运行时库。打开命令提示符并输入以下命令通过Chocolatey安装：
                        <pre><code>choco install -y vcredist2013 vcredist140</code></pre>
                    </li>
                    <li>安装OpenSSL：
                        <ol>
                            <li>从OpenSSL官网下载Win64 OpenSSL v1.1.1t安装包。请注意不要下载Win32或Light版本，也不要下载v3.X.Y版本的安装包。</li>
                            <li>OpenSSL官网已经不再支持预编译的1.1.1版本。您可在<a href="https://github.com/openssl/openssl/releases" target="_blank" style="text-decoration: underline;">OpenSSL releases</a>下载源码，或使用Chocolatey包管理器（推荐）安装OpenSSL 1.1.1：<pre><code>choco install openssl --version=1.1.1.1400</code></pre></li>
                            <li>打开命令提示符，运行以下命令设置环境变量：
                                <pre><code>setx /m OPENSSL_CONF "C:\Program Files\OpenSSL-Win64\bin\openssl.cfg"</code></pre>
                            </li>
                            <li>将OpenSSL添加到系统PATH：
                                <ul>
                                    <li>点击Windows图标，输入"Environment Variables"</li>
                                    <li>点击"编辑系统环境变量"</li>
                                    <li>在弹出的对话框中点击"环境变量"</li>
                                    <li>在下方窗格中选择"Path"变量并点击"编辑"</li>
                                    <li>添加以下路径：<code>C:\Program Files\OpenSSL-Win64\bin\</code></li>
                                </ul>
                            </li>
                        </ol>
                    </li>
                    <li>安装Visual Studio 2019：
                        <ol>
                            <li>如果您已经安装了Visual Studio 2019的付费版本（Professional或Enterprise），可以跳过此步骤。</li>
                            <li>Microsoft提供免费的VS 2019 Community版本。您可以通过<a href="https://visualstudio.microsoft.com/vs/older-downloads/" target="_blank" style="text-decoration: underline;">官方链接</a>下载安装程序。</li>
                            <li>确保安装Visual C++功能：
                                <ul>
                                    <li>在安装过程中选择"使用C++的桌面开发"工作流</li>
                                    <li>在安装组件列表中取消选择所有C++ CMake工具</li>
                                </ul>
                            </li>
                        </ol>
                    </li>
                    <li>安装OpenCV：
                        <ol>
                            <li>下载预编译的OpenCV 3.4.6版本：
                                <ul>
                                    <li>从<a href="https://github.com/ros2/ros2/releases/download/opencv-archives/opencv-3.4.6-vc16.VS2019.zip" target="_blank" style="text-decoration: underline;">此链接</a>下载OpenCV 3.4.6</li>
                                    <li>将下载的文件解压到<code>C:\opencv</code>目录</li>
                                </ul>
                            </li>
                            <li>以管理员权限打开命令提示符，运行以下命令设置环境变量：
                                <pre><code>setx /m OpenCV_DIR C:\opencv</code></pre>
                            </li>
                            <li>将OpenCV添加到系统PATH：
                                <ul>
                                    <li>点击Windows图标，输入"Environment Variables"</li>
                                    <li>点击"编辑系统环境变量"</li>
                                    <li>在弹出的对话框中点击"环境变量"</li>
                                    <li>在下方窗格中选择"Path"变量并点击"编辑"</li>
                                    <li>添加以下路径：<code>C:\opencv\x64\vc16\bin</code></li>
                                </ul>
                            </li>
                        </ol>
                    </li>
                    <li>安装CMake和其他依赖项：
                        <ol>
                            <li>使用Chocolatey安装CMake：
                                <pre><code>choco install -y cmake</code></pre>
                            </li>
                            <li>将CMake添加到系统PATH：
                                <ul>
                                    <li>点击Windows图标，输入"Environment Variables"</li>
                                    <li>点击"编辑系统环境变量"</li>
                                    <li>在弹出的对话框中点击"环境变量"</li>
                                    <li>在下方窗格中选择"Path"变量并点击"编辑"</li>
                                    <li>添加以下路径：<code>C:\Program Files\CMake\bin</code></li>
                                </ul>
                            </li>
                            <li>从<a href="https://github.com/ros2/choco-packages/releases/tag/2022-03-15" target="_blank" style="text-decoration: underline;">ROS2 Chocolatey包发布页面</a>下载以下包：
                                <ul>
                                    <li>asio.1.12.1.nupkg</li>
                                    <li>bullet.3.17.nupkg</li>
                                    <li>cunit.2.1.3.nupkg</li>
                                    <li>eigen.3.3.4.nupkg</li>
                                    <li>tinyxml-usestl.2.6.2.nupkg</li>
                                    <li>tinyxml2.6.0.0.nupkg</li>
                                </ul>
                            </li>
                            <li>以管理员权限打开命令提示符，运行以下命令安装这些包（请将 &lt;PATH\TO\DOWNLOADS&gt; 替换为您下载包的实际路径）：
                                <pre><code>choco install -y -s &lt;PATH\TO\DOWNLOADS&gt; asio cunit eigen tinyxml-usestl tinyxml2 bullet</code></pre>
                            </li>
                            <li>升级pip和setuptools：
                                <pre><code>python -m pip install -U pip setuptools==59.6.0</code></pre>
                            </li>
                            <li>安装ROS2所需的Python依赖：
                                <pre><code>python -m pip install -U catkin_pkg cryptography empy importlib-metadata jsonschema lark==1.1.1 lxml matplotlib netifaces numpy opencv-python PyQt5 pillow psutil pycairo pydot pyparsing==2.4.7 pyyaml rosdistro</code></pre>
                            </li>
                    </li>
                    <li>安装xmllint：
                        <ol>
                            <li>从 <a href="https://www.zlatkovic.com/projects/libxml/">https://www.zlatkovic.com/projects/libxml/</a> 下载以下64位二进制文件：
                                <ul>
                                    <li>iconv</li>
                                    <li>libxml2</li>
                                    <li>zlib</li>
                                </ul>
                            </li>
                            <li>将所有文件解压到 <code>C:\xmllint</code> 目录</li>
                            <li>将xmllint添加到系统PATH：
                                <ul>
                                    <li>点击Windows图标，输入"Environment Variables"</li>
                                    <li>点击"编辑系统环境变量"</li>
                                    <li>在弹出的对话框中点击"环境变量"</li>
                                    <li>在下方窗格中选择"Path"变量并点击"编辑"</li>
                                    <li>添加以下路径：<code>C:\xmllint\bin</code></li>
                                </ul>
                            </li>
                        </ol>
                    </li>
                    <li>安装Qt：
                        <ol>
                            <li>从<a href="https://www.qt.io/offline-installers" target="_blank" style="text-decoration: underline;">Qt官网</a>下载Qt 5.12.X离线安装包</li>
                            <li>运行安装程序，在Qt -> Qt 5.12.12目录下选择MSVC 2017 64-bit组件</li>
                            <li>以管理员权限打开命令提示符，设置以下环境变量（假设Qt安装在默认位置C:\Qt）：
                                <pre><code>setx /m Qt5_DIR C:\Qt\Qt5.12.12\5.12.12\msvc2017_64
setx /m QT_QPA_PLATFORM_PLUGIN_PATH C:\Qt\Qt5.12.12\5.12.12\msvc2017_64\plugins\platforms</code></pre>
                                <div class="alert alert-info">
                                    <p>注意：根据实际安装的MSVC版本、Qt安装目录和Qt版本，以上路径可能需要调整。</p>
                                </div>
                            </li>
                        </ol>
                    </li>
                    <li>安装Graphviz：
                        <ol>
                            <li>从<a href="https://graphviz.org/download/" target="_blank" style="text-decoration: underline;">Graphviz官网</a>下载Windows安装包</li>
                            <li>运行安装程序，在安装过程中选择将Graphviz添加到系统PATH（可以选择"当前用户"或"所有用户"）</li>
                            <div class="alert alert-info">
                                <p>注意：Graphviz是运行rqt_graph所必需的依赖项。</p>
                            </div>
                        </ol>
                    </li>
                    <li>下载并安装ROS2：
                        <ol>
                            <li>访问<a href="https://github.com/ros2/ros2/releases" target="_blank" style="text-decoration: underline;">ROS2发布页面</a></li>
                            <li>下载最新的Windows安装包（例如：ros2-package-windows-AMD64.zip）
                                <div class="alert alert-info">
                                    <p>注意：可能会有多个二进制下载选项，文件名可能会有所不同。</p>
                                </div>
                            </li>
                            <li>将下载的zip文件解压到指定目录（例如：C:\dev\ros2_humble）</li>
                        </ol>
                    </li>
                </ol>
            </section>


            <hr class="divider">
            <section id="item_2">
                <h1>Carbonara示教器</h1>
                <p>Carbonara示教器是Carbonara机械臂的配套软件，提供直观的图形界面来控制机械臂。它包含以下主要功能模块：</p>
                
                <ul>
                    <li><strong>Controller控制器</strong> - 核心控制模块，提供基础的机械臂控制功能</li>
                    <li><strong>Anytroller通用控制器</strong> - 提供任意机械臂的控制接口</li>
                    <li><strong>ROS接口</strong> - 与ROS系统的集成接口</li>
                    <li><strong>运动学模块</strong> - 处理机械臂正逆运动学计算和扩展应用</li>
                    <li><strong>固件管理</strong> - 机械臂固件的更新与管理</li>
                </ul>
            </section>
            <hr class="divider">
      
            <!-- Controller -->
            <section id="controller" class="doc-section">
                <h3>Controller 控制器</h3>
                <div class="alert alert-info">
                    <p>Controller是Carbonara示教器的核心控制模块，提供直观的图形界面来控制机械臂。</p>
                </div>

                <h4>连接控制</h4>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>功能</th>
                            <th>描述</th>
                            <th>参数</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Connect</td>
                            <td>连接到机械臂</td>
                            <td>
                                <ul>
                                    <li>串口: COM1-COM99</li>
                                    <li>波特率: 115200</li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <td>Disconnect</td>
                            <td>安全断开连接</td>
                            <td>无</td>
                        </tr>
                        <tr>
                            <td>Refresh</td>
                            <td>刷新可用串口列表</td>
                            <td>无</td>
                        </tr>
                    </tbody>
                </table>

                <h4>运动控制</h4>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>功能</th>
                            <th>描述</th>
                            <th>参数范围</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>电位器开关</td>
                            <td>切换控制模式</td>
                            <td>ON/OFF</td>
                        </tr>
                        <tr>
                            <td>关节滑块</td>
                            <td>控制各关节角度</td>
                            <td>-180° ~ +180°</td>
                        </tr>
                        <tr>
                            <td>末端执行器</td>
                            <td>控制夹爪开合</td>
                            <td>OPEN/CLOSE</td>
                        </tr>
                        <tr>
                            <td>归零按钮</td>
                            <td>使机械臂回到初始位置</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td>执行按钮</td>
                            <td>执行当前设定的动作</td>
                            <td>-</td>
                        </tr>
                    </tbody>
                </table>

                <div class="alert alert-warning">
                    <h5>注意事项：</h5>
                    <ul>
                        <li>首次使用请进行Home位置校准</li>
                        <li>切换模式前确保机械臂处于安全位置</li>
                        <li>注意工作空间限制</li>
                    </ul>
                </div>
            </section>
            <hr class="divider">
      
            <!-- Anytroller -->
            <section id="anytroller">
                <h3>Anytroller</h3>
                <div class="alert alert-info">
                    <p>Anytroller是一个通用机械臂控制接口，支持1-8个关节的自定义机械臂配置和控制。</p>
                </div>

                <h4>初始化配置</h4>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>参数</th>
                            <th>描述</th>
                            <th>取值范围</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>关节数量</td>
                            <td>设置机械臂的关节数</td>
                            <td>1-8个</td>
                        </tr>
                        <tr>
                            <td>初始位置</td>
                            <td>各关节的起始角度</td>
                            <td>-180° ~ +180°</td>
                        </tr>
                        <tr>
                            <td>运动范围</td>
                            <td>各关节的最大运动范围</td>
                            <td>可自定义限位角度</td>
                        </tr>
                    </tbody>
                </table>

                <h4>控制功能</h4>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>功能</th>
                            <th>描述</th>
                            <th>参数</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>关节控制</td>
                            <td>独立控制每个关节</td>
                            <td>
                                <ul>
                                    <li>角度: -180° ~ +180°</li>
                                    <li>速度: 0-100%</li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <td>同步运动</td>
                            <td>多关节协同运动</td>
                            <td>支持自定义运动序列</td>
                        </tr>
                        <tr>
                            <td>Home位置</td>
                            <td>返回预设的初始位置</td>
                            <td>可自定义Home位置</td>
                        </tr>
                    </tbody>
                </table>

                <div class="alert alert-warning">
                    <h5>使用注意：</h5>
                    <ul>
                        <li>首次使用前必须完成初始化配置</li>
                        <li>确保所有关节参数设置正确，避免碰撞</li>
                        <li>建议先在低速模式下测试运动</li>
                        <li>保存配置后可导出为配置文件供后续使用</li>
                    </ul>
                </div>
            </section>
            <hr class="divider">

            <!-- ROS -->
            <section id="ros">
                <h3>ROS接口</h3>
                <div class="alert alert-info">
                    <p>ROS接口模块提供了与ROS1和ROS2系统的集成功能，让用户能够通过ROS生态系统来控制和开发Carbonara机械臂应用。</p>
                </div>

                <h4>ROS配置</h4>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>功能</th>
                            <th>描述</th>
                            <th>参数</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>System Check</td>
                            <td>检查ROS环境配置</td>
                            <td>
                                <ul>
                                    <li>ROS版本检测</li>
                                    <li>依赖包检查</li>
                                    <li>工作空间验证</li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <td>Switch Mode</td>
                            <td>切换到ROS控制模式</td>
                            <td>
                                <ul>
                                    <li>ROS1模式</li>
                                    <li>ROS2模式</li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <td>URDF配置</td>
                            <td>机械臂模型配置</td>
                            <td>
                                <ul>
                                    <li>ROS1 URDF</li>
                                    <li>ROS2 URDF</li>
                                    <li>自定义URDF导入</li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <td>Workspace</td>
                            <td>工作空间配置</td>
                            <td>
                                <ul>
                                    <li>catkin_ws (ROS1)</li>
                                    <li>colcon_ws (ROS2)</li>
                                    <li>包管理</li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <td>MoveIt配置</td>
                            <td>运动规划配置</td>
                            <td>
                                <ul>
                                    <li>MoveIt Setup Assistant</li>
                                    <li>规划组配置</li>
                                    <li>控制器配置</li>
                                </ul>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <div class="alert alert-warning">
                    <h5>使用说明：</h5>
                    <ul>
                        <li>首次使用请先运行System Check确保环境正确置</li>
                        <li>切换ROS模式前请确保已完成相应版本的配置</li>
                        <li>URDF修改后需要重新运行MoveIt配置</li>
                        <li>建议参考ROS Wiki了解更多使用细节</li>
                    </ul>
                </div>
            </section>
            <hr class="divider">

            <!-- Kinematics -->
            <section id="kinematics">
                <h3>运动学模块</h3>
                <div class="alert alert-info">
                    <p>运动学模块提供了完整的机械臂运动学解算和路径规划功能，支持多种算法和应用场景。</p>
                </div>

                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th>功能</th>
                            <th>说明</th>
                            <th>参数设置</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>URDF配置</td>
                            <td>机械臂模型加载</td>
                            <td>
                                <ul>
                                    <li>加载URDF文件</li>
                                    <li>导入URDF (默认: Carbonara)</li>
                                    <li>URDF预览</li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <td>求解器参数</td>
                            <td>运动学求解器配置</td>
                            <td>
                                <ul>
                                    <li>逆解算器选择:
                                        <ul>
                                            <li>PyBullet求解器</li>
                                            <li>Levenberg-Marquardt求解器</li>
                                        </ul>
                                    </li>
                                    <li>规划器选择:
                                        <ul>
                                            <li>Linear规划器</li>
                                            <li>RRT规划器</li>
                                            <li>CHOMP规划器</li>
                                        </ul>
                                    </li>
                                    <li>求解参数:
                                        <ul>
                                            <li>残差阈值 (Residual Threshold)</li>
                                            <li>最大迭代次数 (Max Iterations)</li>
                                            <li>Lambda参数 (仅LM算法)</li>
                                        </ul>
                                    </li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <td>运动学计算</td>
                            <td>正逆运动学求解</td>
                            <td>
                                <ul>
                                    <li>正运动学:
                                        <ul>
                                            <li>关节角度输入</li>
                                            <li>末端位姿计算</li>
                                        </ul>
                                    </li>
                                    <li>逆运动学:
                                        <ul>
                                            <li>目标位置(XYZ)输入</li>
                                            <li>路径点设置</li>
                                            <li>规划器启用选项</li>
                                            <li>路径点数量设置</li>
                                        </ul>
                                    </li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <td>控制模式</td>
                            <td>机械臂控制方式</td>
                            <td>
                                <ul>
                                    <li>位姿控制 (摄像头)</li>
                                    <li>G-code控制</li>
                                    <li>工作空间分析器</li>
                                </ul>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <div class="alert alert-warning">
                    <h5>注意事项：</h5>
                    <ul>
                        <li>使用高级规划功能前请确保已正确配置关依赖</li>
                        <li>建议在仿真环境中测试复杂轨迹</li>
                        <li>进行工作空间分析时注意机械臂的物理限制</li>
                    </ul>
                </div>
            </section>
            <hr class="divider">

            <!-- Firmware -->
            <section id="firmware">
                <h3>固件管理</h3>
                <div class="alert alert-info">
                    <p>固件管理模块提供Carbonara机械臂的固件更新功能。请确保更新过程中电源稳定。</p>
                </div>

                <h4>基本配置</h4>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>配置项</th>
                            <th>参数说明</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>串口连接</td>
                            <td>
                                <ul>
                                    <li>端口选择: COM1-COM99</li>
                                    <li>自动检测可用串口</li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <td>开发板选择</td>
                            <td>
                                <ul>
                                    <li>ESP32</li>
                                    <li>Arduino</li>
                                </ul>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <h4>烧录参数</h4>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>开发板</th>
                            <th>参数设置</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>ESP32参数</td>
                            <td>
                                <ul>
                                    <li>波特率 (Baud Rate): 115200</li>
                                    <li>Flash模式 (Flash Mode): QIO</li>
                                    <li>Flash频率 (Flash Frequency): 40m</li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <td>Arduino参数</td>
                            <td>
                                <ul>
                                    <li>开发板型号 (Board Type): Uno</li>
                                    <li>波特率 (Baud Rate): 115200</li>
                                </ul>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <h4>固件更新</h4>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>更新方式</th>
                            <th>说明</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>自定义固件</td>
                            <td>上传本地.bin文件进行更新</td>
                        </tr>
                        <tr>
                            <td>远程固件</td>
                            <td>在线更新官方最新固件</td>
                        </tr>
                    </tbody>
                </table>

                <div class="alert alert-warning">
                    <h5>注意事项：</h5>
                    <ul>
                        <li>更新前请确认选择了正确的开发板类型</li>
                        <li>烧录过程中请勿断开设备连接</li>
                    </ul>
                </div>
            </section>
            <hr class="divider">

            <section id="item_3">
                <h3>Change Log</h3>
                <ul>
                    <li>
                        <strong>版本 1.2 (2024-10-21)</strong>
                        <ul>
                            <li>新增运动学模块，支持机械臂的正向和逆向运动学计算</li>
                            <li>UI界面优化</li>
                        </ul>
                    </li>
                    <li>
                        <strong>版本 1.1 (2023-09-21)</strong>
                        <ul>
                            <li>新增Anytroller模块, 支持自定义机械臂控制</li>
                            <li>新增固件管理界面</li>
                            <li>优化机械臂控制模式和ROS模式间的切换</li>
                        </ul>
                    </li>
                    <li>
                        <strong>版本 1.0 (2024-09-10)</strong>
                        <ul>
                            <li>Carbonara示教器软件正式版发布</li>
                            <li>新增ROS集成功能</li>
                            <li>优化了Controller的用户界面</li>
                            <li>修复了一些已知的稳定性问题</li>
                        </ul>
                    </li>
                    <li>
                        <strong>版本 1.0-beta (2024-09-01)</strong>
                        <ul>
                            <li>Carbonara示教器软件测试板发布</li>
                            <li>包含Controller基本功能</li>
                        </ul>
                    </li>
                </ul>
            </section>
            <hr class="divider">
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>
    // 添加导航切换功能
    document.querySelector('.nav-toggle').addEventListener('click', function() {
        document.querySelector('.idocs-navigation').classList.toggle('active');
    });

    // 点击内容区域时关闭导航栏（在移动设备上）
    document.querySelector('.idocs-content').addEventListener('click', function() {
        if (window.innerWidth <= 767) {
            document.querySelector('.idocs-navigation').classList.remove('active');
        }
    });

    // 激活滚动监听
    $('body').scrollspy({ target: '.idocs-navigation' });
</script>
</body>
</html>