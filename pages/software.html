---
layout: page
title:
permalink: "/techsupport/"
comments: false
---

<style>
/* 限制作用域，只对技术支持页面内容生效 */
.techsupport-container {
    /* 原有样式保持不变 */
    display: flex;
    width: 100%;
    max-width: 1400px;
    margin: 0 auto;
    position: relative;
    gap: 30px;
    padding-top: 80px; /* 为顶部导航留出空间 */
}

/* 其他样式需要添加特定的作用域 */
.techsupport-container .param-table {
    width: 100%;
    border-collapse: collapse;
    margin: 15px 0;
    background: #fff;
}

.techsupport-container section[id] {
    scroll-margin-top: 100px;
}

.techsupport-container .param-table th,
.techsupport-container .param-table td {
    padding: 12px 15px;
    border: 1px solid #e9ecef;
}

.techsupport-container .param-table th {
    background: #f8f9fa;
    font-weight: 600;
}

/* 代码块 */
pre {
    background: #f8f9fa;
    border-radius: 4px;
    padding: 15px;
    margin: 15px 0;
    overflow-x: auto;
    position: relative;
}

code {
    font-family: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    font-size: 14px;
}

/* 警告框 */
.alert {
    padding: 15px 20px;
    margin: 15px 0;
    border-radius: 4px;
    border-left: 4px solid;
}

.alert-warning {
    background: #fff3cd;
    border-left-color: #ffc107;
    color: #856404;
}

.alert-info {
    background: #d1ecf1;
    border-left-color: #17a2b8;
    color: #0c5460;
}

/* 分隔线样式 */
hr.divider {
    margin-top: 20px;
    margin-bottom: 20px;
    border: 0;
    border-top: 1px solid #e9ecef;
}

/* 段落和标题间距 */
.techsupport-container p {
    margin-top: 15px;
    margin-bottom: 15px;
    line-height: 1.6;
}

.techsupport-container h1 {
    margin-top: 35px;
    margin-bottom: 25px;
}

.techsupport-container h2 {
    margin-top: 30px;
    margin-bottom: 20px;
}

.techsupport-container h3 {
    margin-top: 25px;
    margin-bottom: 20px;
}

.techsupport-container h4 {
    margin-top: 20px;
    margin-bottom: 15px;
}

.techsupport-container ul,
.techsupport-container ol {
    margin-top: 10px;
    margin-bottom: 15px;
}

.techsupport-container li {
    margin-bottom: 8px;
    line-height: 1.6;
}

/* 导航栏样式修改，避免影响全局导航 */
.idocs-navigation {
    position: sticky;
    top: 100px;
    height: calc(100vh - 100px);
    overflow-y: auto;
    flex: 0 0 250px;
    max-width: 250px;
    padding-right: 15px;
    z-index: 999;
}

/* 内容区域样式 */
.idocs-content {
    flex: 1;
    min-width: 0;
    overflow-x: hidden;
    padding-right: 1px;
}

/* 内容容器样式 */
.idocs-content .container {
    max-width: 100%;
    padding: 0;
}

/* 响应式设计 */
@media (max-width: 768px) {
    .techsupport-container {
        flex-direction: column;
        padding-top: 60px;
    }
    
    .idocs-navigation {
        position: fixed;
        left: -250px;
        transition: left 0.3s ease;
        background: white;
        box-shadow: 2px 0 5px rgba(0,0,0,0.1);
        z-index: 999;
    }
    
    .idocs-navigation.active {
        left: 0;
    }
    
    .nav-toggle {
        display: block;
        position: fixed;
        top: 100px;
        left: 20px;
        z-index: 1001;
    }
}

/* 响应式调整 */
@media (min-width: 1600px) {
    .techsupport-container {
        max-width: 1600px;
    }
}

/* 隐藏移动端菜单按钮（在桌面端） */
.nav-toggle {
    display: none;
}
</style>

<body data-spy="scroll" data-target=".idocs-navigation" data-offset="100">

<div class="techsupport-container">
    <!-- 添加导航切换按钮 -->
    <button class="nav-toggle d-md-none">菜单</button>

    <!-- Sidebar Navigation -->
    <div class="idocs-navigation bg-light">
        <ul class="nav flex-column">
            <li class="nav-item"><a class="nav-link active" href="#terminology">Terminology</a></li>
            <li class="nav-item"><a class="nav-link" href="#item_1">Minima</a>
                <ul class="nav flex-column">
                    <li class="nav-item"><a class="nav-link" href="#item_1_1">用户手册</a></li>
                    <li class="nav-item"><a class="nav-link" href="#item_1_2">软件下载</a></li>
                    <li class="nav-item"><a class="nav-link" href="#item_1_3">ROS</a></li>
                    <li class="nav-item"><a class="nav-link" href="#item_1_4">ROS2</a></li>
                </ul>
            </li>
            <li class="nav-item"><a class="nav-link" href="#item_2">Noman-app</a>
                <ul class="nav flex-column">
                    <li class="nav-item"><a class="nav-link" href="#robot_profile">Robot Profile 机器人配置</a></li>
                    <li class="nav-item"><a class="nav-link" href="#controller">Controller 控制器</a></li>
                    <li class="nav-item"><a class="nav-link" href="#ros">ROS 接口</a></li>
                    <li class="nav-item"><a class="nav-link" href="#kinematics">Kinematics 运动学</a></li>
                    <li class="nav-item"><a class="nav-link" href="#firmware">Firmware 固件管理</a></li>
                </ul>
            </li>
            <li class="nav-item"><a class="nav-link" href="#item_3">Change Log</a></li>
        </ul>
    </div>
  
    <!-- Docs Content -->
    <div class="idocs-content">
        <div class="container"> 
            <!-- Terminology -->
            <section id="terminology">
                <h1>Terminology</h1>
                <img src="/assets/images/robot_arm_system.png" alt="Minima机械臂系统架构" class="img-fluid" style="max-width: 450px; display: block; margin-left: auto; margin-right: auto; padding: 20px 0;">
                <p>工业机械臂平台架构主要包括机械臂本体、电源供应、控制器、传感器和中央处理器（电脑）。我们的教育机械臂展现了工业机械臂的核心组成部分，但采用了更经济实惠的替代方案：</p>
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th>系统组成</th>
                            <th>工业机械臂</th>
                            <th>MINIMA</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>电源系统</td>
                            <td>三相高压电源(380V/220V)驱动大功率伺服电机</td>
                            <td>6V直流电源驱动舵机</td>
                        </tr>
                        <tr>
                            <td>通讯协议</td>
                            <td>CAN总线或EtherCAT等工业级通讯协议</td>
                            <td>I2C协议</td>
                        </tr>
                        <tr>
                            <td>控制系统</td>
                            <td>专业的PLC或工控机</td>
                            <td>ESP32微控制器</td>
                        </tr>
                        <tr>
                            <td>驱动系统</td>
                            <td>伺服电机、减速器和专业驱动器</td>
                            <td>集成驱动电路的数字舵机</td>
                        </tr>
                        <tr>
                            <td>计算机系统</td>
                            <td>根据时间严格把控优先级的操作系统</td>
                            <td>普通家用电脑</td>
                        </tr>
                    </tbody>
                </table>
                
                <h3>机械臂基础术语</h3>
                
                <h4>关节类型 (Joint Types)</h4>
                <ul>
                    <li><strong>Revolute (旋转关节)</strong> - 允许绕固定轴旋转的关节，类似于门的铰链。这是机械臂中最常见的关节类型，具有一个旋转自由度，运动范围通常在0°到360°之间。</li>
                    <li><strong>Prismatic (移动关节)</strong> - 允许沿直线方向移动的关节，类似于活塞运动。具有一个平移自由度，常见于龙门式机械臂或伸缩臂中。</li>
                    <li><strong>Continuous (连续关节)</strong> - 可以无限制地连续旋转的关节，没有角度限制，常用于末端旋转轴或传送带系统。</li>
                    <li><strong>Fixed (固定关节)</strong> - 没有运动自由度的连接，用于固定连接两个刚体部分，常用于结构性连接或工具安装。</li>
                </ul>

                <h4>自由度 (Degrees of Freedom, DOF)</h4>
                <p><strong>自由度</strong>是指机械臂在空间中独立运动的方向数量。一个物体在三维空间中最多有6个自由度：3个平移自由度（X、Y、Z轴方向）和3个旋转自由度（绕X、Y、Z轴旋转）。</p>
                <ul>
                    <li><strong>关节自由度</strong> - 机械臂的总关节数，每个独立关节提供一个自由度。例如，Minima机械臂有5个旋转关节，即5个自由度。</li>
                    <li><strong>末端自由度</strong> - 机械臂末端执行器在空间中可以实现的独立运动数量。要完全控制末端的位置和姿态，通常需要6个自由度。</li>
                    <li><strong>冗余自由度</strong> - 当机械臂的关节数超过6个时，额外的自由度可以提供更灵活的路径规划和避障能力。</li>
                </ul>

                <h4>传动系统</h4>
                <ul>
                    <li><strong>减速比 (Gear Ratio)</strong> - 电机转速与输出转速之比。较高的减速比可以提供更大的扭矩和更高的精度，但会降低运动速度。例如，减速比为100:1意味着电机旋转100圈，输出轴只旋转1圈。</li>
                    <li><strong>扭矩 (Torque)</strong> - 关节产生的旋转力，通常以牛顿·米(N·m)为单位。更大的扭矩允许机械臂举起更重的负载。</li>
                    <li><strong>负载能力 (Payload Capacity)</strong> - 机械臂末端可以承载的最大重量，受关节扭矩和机械结构强度的限制。</li>
                </ul>

                <h4>运动学 (Kinematics)</h4>
                <ul>
                    <li><strong>正向运动学 (Forward Kinematics, FK)</strong> - 已知各关节的角度，计算机械臂末端执行器在空间中的位置和姿态。这是一个直接的数学计算过程，通常使用DH参数（Denavit-Hartenberg参数）和齐次变换矩阵来实现。</li>
                    <li><strong>逆向运动学 (Inverse Kinematics, IK)</strong> - 已知末端执行器期望的位置和姿态，反向计算各关节需要的角度。这是一个更复杂的问题，可能存在多个解、无解或无穷多解的情况。常用算法包括解析解法、几何法和数值迭代法（如Jacobian方法、LM算法等）。</li>
                    <li><strong>工作空间 (Workspace)</strong> - 机械臂末端执行器可以到达的所有位置的集合。工作空间分析对于任务规划和安全评估至关重要。</li>
                    <li><strong>奇异点 (Singularity)</strong> - 机械臂在某些配置下，会失去一个或多个自由度的位置。在奇异点附近，微小的末端运动可能需要关节的极大速度变化。</li>
                </ul>

                <h4>轨迹与路径规划</h4>
                <ul>
                    <li><strong>路径规划 (Path Planning)</strong> - 确定机械臂从起始位置到目标位置的运动路线，考虑避障、关节限位等约束条件。常见算法包括RRT（快速随机树）、PRM（概率路线图）等。</li>
                    <li><strong>轨迹规划 (Trajectory Planning)</strong> - 在路径基础上，进一步确定机械臂在每个时刻的位置、速度和加速度，确保运动平滑且在物理限制范围内。</li>
                    <li><strong>路径优化 (Path Optimization)</strong> - 对已规划的路径进行优化，目标可能包括：最短路径、最短时间、最小能耗、最平滑运动等。常用方法有CHOMP（协方差哈密顿优化）、TrajOpt等。</li>
                    <li><strong>插补 (Interpolation)</strong> - 在两个路径点之间生成平滑的中间点，常见的插补方式包括：
                        <ul>
                            <li><strong>线性插补 (Linear)</strong> - 末端执行器沿直线移动</li>
                            <li><strong>关节插补 (Joint)</strong> - 各关节以固定速度比同步运动</li>
                            <li><strong>圆弧插补 (Circular)</strong> - 末端执行器沿圆弧路径移动</li>
                            <li><strong>样条插补 (Spline)</strong> - 使用样条曲线生成平滑轨迹</li>
                        </ul>
                    </li>
                </ul>

                <h4>运动控制</h4>
                <ul>
                    <li><strong>PTP (Point-to-Point)</strong> - 点到点运动，机械臂以最快速度从当前位置移动到目标位置，不保证路径形状，通常用于无障碍环境下的快速移动。</li>
                    <li><strong>LIN (Linear)</strong> - 线性运动，末端执行器沿直线路径移动到目标位置，适用于需要精确路径的应用，如焊接、涂胶等。</li>
                    <li><strong>CIRC (Circular)</strong> - 圆弧运动，末端执行器沿圆弧路径移动，需要指定中间点或圆心，常用于曲线轨迹跟踪。</li>
                    <li><strong>速度控制 (Velocity Control)</strong> - 控制机械臂运动的速度，包括关节速度和末端笛卡尔速度。</li>
                    <li><strong>加速度限制 (Acceleration Limits)</strong> - 限制运动的加速度，以保护机械结构和提高运动平滑性。</li>
                </ul>

                <h4>坐标系统</h4>
                <ul>
                    <li><strong>基坐标系 (Base Frame)</strong> - 固定在机械臂基座上的参考坐标系，作为整个机械臂的基准。</li>
                    <li><strong>工具坐标系 (Tool Frame, TCP)</strong> - 固定在末端工具上的坐标系，TCP（Tool Center Point）是工具的控制点，通常是工具的尖端或中心。</li>
                    <li><strong>工件坐标系 (Workpiece Frame)</strong> - 固定在工件上的坐标系，方便编程时以工件为参考。</li>
                    <li><strong>关节空间 (Joint Space)</strong> - 以各关节角度为变量描述机械臂状态的空间。</li>
                    <li><strong>笛卡尔空间 (Cartesian Space)</strong> - 以末端执行器的位置(X, Y, Z)和姿态(Roll, Pitch, Yaw)描述的空间。</li>
                </ul>

                <h4>机器人描述格式</h4>
                <ul>
                    <li><strong>URDF (Unified Robot Description Format)</strong> - 统一机器人描述格式，使用XML语法描述机器人的物理结构、关节、连杆和传感器等信息，是ROS系统中的标准格式。</li>
                    <li><strong>Xacro</strong> - URDF的扩展格式，支持宏定义、参数化和模块化，使机器人描述更加简洁和可维护。</li>
                    <li><strong>DH参数 (Denavit-Hartenberg Parameters)</strong> - 一种用四个参数描述相邻连杆之间关系的标准方法，包括连杆长度(a)、连杆扭角(α)、关节偏移(d)和关节角(θ)。</li>
                </ul>

                <h4>控制与通信</h4>
                <ul>
                    <li><strong>PID控制</strong> - 比例-积分-微分控制器，是最常用的闭环控制算法，用于精确控制关节位置和速度。</li>
                    <li><strong>串口通信 (Serial Communication)</strong> - 通过串行端口进行数据传输，常用协议包括RS-232、RS-485等。</li>
                    <li><strong>I2C协议</strong> - 一种同步串行通信协议，适用于短距离、低速设备间的通信，Minima使用I2C协议控制舵机。</li>
                    <li><strong>CAN总线</strong> - 控制器局域网，工业机械臂常用的实时通信协议，具有高可靠性和抗干扰能力。</li>
                    <li><strong>实时控制 (Real-time Control)</strong> - 保证控制指令在规定时间内执行，对机械臂的稳定性和精度至关重要。</li>
                </ul>

                <p>了解这些基础术语将帮助您更好地理解机械臂的工作原理和控制方法。本页面后续内容将指导您完成从环境准备到实际操作Minima机械臂的各项流程。</p>
            </section>
            <hr class="divider">
            <!-- Item 1 -->
            <section id="item_1">
                <h1>Minima</h1>
            </section>
            <hr class="divider">
            <!-- Item 1.1 -->
            <section id="item_1_1">
                <h3>用户手册</h3>
                
                <h4>1. 产品参数</h4>
                <ul>
                    <li>精度: ±0.1mm</li>
                    <li>工作电压: 6V DC</li>
                    <li>自由度: 5轴</li>
                    <li>主要材料: ABS (FDM)</li>
                    <li>通讯方式: USB串口/支持wifi,蓝牙拓展</li>
                    <li>电机: 高精度金属舵机</li>
                    <li>最大负载: 500g</li>
                    <li>工作范围: 半径约150mm</li>
                </ul>

                <h4>2. 装配</h4>
                <p>请安装详细装配图对机械臂进行安装：<a href="/assets/data/assembly-minima.pdf" target="_blank" style="text-decoration: underline; color: purple;">下载装配图</a></p>
                <p>请根据电路图对内部电路进行确认和维护: <a href="/assets/data/electronic-minima.jpg" target="_blank" style="text-decoration: underline; color: purple;">下载电路图</a></p>
                <p>装配视频教程：<a href="https://pan.quark.cn/s/c5b246d82464?pwd=97Bx" target="_blank" style="text-decoration: underline; color: purple;">观看装配视频</a></p>
                
                <h4>3. 注意事项</h4>
                <ul>
                    <li>使用前请仔细阅读说明书，确保正确连接所有部件。</li>
                    <li>首次使用时，请使用我们的软件进行校准，并确保所有关节运动正常。</li>
                    <li>请勿超过最大负载限制，以免损坏电机或机械结构。</li>
                    <li>在进行任何维护或调整之前，请务必断开电源。</li>
                    <li>使用过程中如遇到异常情况，请先尝试重启机械臂（包括断电重启和软件内重启）。</li>
                    <li>请将机械臂放置在平稳的表面上使用，避免意外跌落。</li>
                    <li>本产品面向青少年和成人，儿童使用时需有成人监督。</li>
                </ul>

                <p>如需更多详细信息或技术支持，请联系我们的客户服务团队。</p>
            </section>
            <hr class="divider">
      
            <!-- Item 1.2 -->
            <section id="item_1_2">
                <h3>软件下载</h3>
                <p>如果您不使用电位器控制器，可以下载我们提供的通用软件来控制 Minima 机械臂。我们为不同操作系统（Windows、macOS、Linux）提供了相应的软件版本。</p>
                
                <h4>上位机软件Noman-app</h4>
                <p>请访问我们的 GitHub Releases 页面下载适合您操作系统的最新版本：</p>
                <p><a href="https://github.com/NoManRobotics/noman-app/releases" target="_blank" style="text-decoration: underline; color: purple; font-size: 16px;">下载 Noman-app（Windows, MacOS, Ubuntu）</a></p>

                <p>下载并安装适合您操作系统的版本后，请参考<a href="#item_2" style="text-decoration: underline; color: black;">软件使用说明</a>进行操作。如遇到任何问题，请联系我们的技术支持。</p>

                <h4>机械臂主控固件</h4>
                <p><strong>注意：</strong>机械臂主控固件已预先安装在您的机械臂中，用户通常无需自行下载或安装。如果您需要重新安装固件或进行手动更新，可以从以下链接下载最新版本的固件：<a href="https://github.com/NoManRobotics/minima-firmware" target="_blank" style="text-decoration: underline; color: purple;">下载 Minima 机械臂固件</a></p>
                
                <p>我们建议通过软件自动烧录固件。只需在Noman-app中找到"固件"选项，然后按照提示进行操作烧录最新固件。</p>
            </section>
            <hr class="divider">

            <!-- Item 1.3 -->
            <section id="item_1_3">
                <h3>ROS</h3>
                <h3>Step 1: 准备您的环境</h3>
                <p>ROS版本对应固定的Ubuntu版本。本机械臂在Ubuntu 20.04 LTS环境下使用ROS noetic开发,以下说明和教程安装均在ROS noetic下完成。您可以在虚拟机(VirtualBox, Vmware Workstation Pro等)或者物理Ubuntu系统下安装<a href="https://releases.ubuntu.com/focal/" target="_blank" style="text-decoration: underline;">镜像文件</a>。</p>
                <p>通常情况下,安装物理的Ubuntu系统是更好的选择,因为在虚拟机中,3D加速和USB设备的支持会受到限制。</p>
                <p><strong>注意：</strong>您可以在树莓派上安装ROS,但不幸的是,它的性能不足以运行Rviz中的模拟,更不用说Gazebo了。</p>
                
                <ol>
                    <li>配置ROS环境。请按照<a href="https://github.com/NoManRobotics/ROS-setup/tree/main/ros1" target="_blank" style="text-decoration: underline;">这个快速安装指南</a>在对应Ubuntu版本上安装ROS。您需要依照每一步骤在终端下完成安装。</li>
                    <li>MoveIt!是ROS中用于移动操作的软件包。检查MoveIt!是否正常工作。运行以下命令：
                        <pre><code>roslaunch panda_moveit_config demo.launch rviz_tutorial:=true</code></pre>
                        如果您愿意,可以按照MoveIt<a href="https://docs.ros.org/en/kinetic/api/moveit_tutorials/html/doc/quickstart_in_rviz/quickstart_in_rviz_tutorial.html" target="_blank" style="text-decoration: underline;">基础教程</a>进行操作。
                    </li>
                </ol>

                <p>然后,您可以直接下载我们预处理完成的<a href="https://github.com/NoManRobotics" target="_blank" style="text-decoration: underline;">ROS workspace</a>,其中包括URDF文件和Moveit!配置包。如果想深入了解ROS机械臂配置过程,可以根据以下两步指南进行手动配置。</p>

                <h3>Step 2: Unified Robot Description Format (URDF)</h3>
                <p>我们已经为您准备好了Minima的统一机器人描述格式文件。您可以从我们的GitHub仓库下载这个<a href="https://github.com/NoManRobotics" target="_blank" style="text-decoration: underline;">URDF文件</a>。</p>
                <p>我们将简要介绍URDF文件的结构和内容,以帮助您更好地理解它,并在将来编写自己的URDF文件时作为参考。</p>

                <h4>连接(Links)</h4>
                <p>连接是机器人的各个部分，如手腕或平台。它们具有以下属性：</p>
                <ul>
                    <li>用于在Rviz和Gazebo中进行视觉表示。使用高质量的网格模型。</li>
                    <li>用于路径规划期间的碰撞检查。建议使用低质量的网格模型，但为了教程的目的，我们使用与视觉相同的模型。</li>
                </ul>

                <h4>关节(Joints)</h4>
                <p>URDF中的关节是链接之间的连接,描述了它们之间的相对位置和运动方式。它们具有以下属性：</p>
                <ul>
                    <li>关节的旋转方向(沿x、y或z轴)</li>
                    <li>关节的最小和最大角度（以弧度为单位）。仅适用于"revolute"类型的关节（"continuous"类型的关节没有限制，因为它们可以连续旋转）</li>
                    <li>关节相对于原点的位置</li>
                    <li>描述哪两个链接通过该关节连接</li>
                </ul>

                <h4>使用3D网格模型</h4>
                <p>如果您使用的是与我相同的机械臂,您需要将机械臂的3D网格模型复制到urdf_tutorial包文件夹中。使用以下命令:</p>
                <pre><code>sudo cp &lt;要复制的文件名&gt; /opt/ros/kinetic/share/urdf_tutorial/meshes/</code></pre>
                <p>如果您使用自己的网格模型,请确保在将它们导出为二进制STL格式之前,它们在3D建模软件中以原点(xyz 000)为中心。</p>

                <h4>在Rviz中可视化结果</h4>
                <p>现在您可以启动Rviz来可视化结果,使用以下命令:</p>
                <pre><code>&gt;roslaunch urdf_tutorial display.launch model:=arm.urdf</code></pre>
                <p>(从您刚刚创建的URDF文件所在的文件夹中启动)</p>

                <p>检查关节和链接，确保它们的旋转和位置完全符合预期。如果一切正常，请继续下一步。</p>

                <h3>Step 3: 使用MoveIt Setup Assistant创建机器人配置</h3>
                <p>现在您的URDF文件已经准备好了,是时候将它转换为机器人配置包了。</p>

                <p>使用以下命令启动MoveIt Setup Assistant:</p>
                <pre><code>&gt;roslaunch moveit_setup_assistant setup_assistant.launch</code></pre>

                <p>这个过程在MoveIt官方教程中有非常详细的描述:您可以在<a href="https://docs.ros.org/en/kinetic/api/moveit_tutorials/html/doc/setup_assistant/setup_assistant_tutorial.html" target="_blank" style="text-decoration: underline;">这里</a>找到。</p>

                <p>创建配置包后:进入您的catkin工作空间文件夹并执行以下命令来构建包:</p>
                <pre><code>&gt;catkin make
&gt;source devel/setup.bash</code></pre>

                <p>现在您可以使用以下命令启动它：</p>
                <pre><code>&gt;roslaunch my_arm_xacro demo.launch rviz_tutorial:=true</code></pre>

                <p>其中，您需要将"my_arm_xacro"更改为您的包的名称。</p>

                <h3>Step 4: 连接控制板至ROS</h3>
                <p>在我们的案例中,ESP32运行一个带有rosserial的ROS节点将作为机器人控制器。ESP32的代码附加在此步骤中,也可以在GitHub上获取。</p>

                <p>在ESP32上运行的ROS节点基本上订阅了在运行MoveIt的计算机上发布的/JointState主题,然后将数组中的关节角度从弧度转换为度,并使用ESP32的PWM功能将它们传递给伺服电机。</p>

                <p>这不是工业机器人的标准做法。理想情况下，您应该在/FollowJointState主题上发布运动轨迹,然后在/JointState主题上接收反馈。但在我们的机械臂中,舵机无法提供反馈,所以我们将直接订阅由FakeRobotController节点发布的/JointState主题。我们假设传递给电机的任何角度没有任何误差。</p>

                <p>有关rosserial如何工作的更多信息,您可以参考以下教程：</p>
                <p><a href="http://wiki.ros.org/rosserial_arduino/Tutorials" target="_blank" style="text-decoration: underline;">http://wiki.ros.org/rosserial_arduino/Tutorials</a></p>

                <p>将代码上传到ESP32后,您需要使用USB或Wi-Fi将其连接到运行ROS安装的计算机。</p>

                <p>使用USB连接至机械臂后,执行以下命令以进行串口通讯:</p>
                <pre><code>&gt;roslaunch my_arm_xacro demo.launch rviz_tutorial:=true
&gt;sudo chmod -R 777 /dev/ttyUSB0
&gt;rosrun rosserial_python serial_node.py _port:=/dev/ttyUSB0 _baud:=115200 
</code></pre>

                <p>现在,您可以使用RVIZ中的交互式标记将机器人手臂移动到某个姿势,然后按下"Plan"和"Execute"，使其实际移动到该位置。</p>

            </section>
            <hr class="divider">

            <!-- Item 1.4 -->
            <section id="item_1_4">
                <h3>ROS2</h3>
                <div class="alert alert-info">
                    <p>本节将指导您在ROS2环境下配置和使用Minima机械臂。我们同样使用Ubuntu 22.04 LTS但是这次安装ROS2 Humble。</p>
                    <p>根据官方教程，ROS2支持Linux和Windows系统。我们将分别对Linux和Windows系统进行配置。但是，我们仍然建议使用Linux环境。</p>
                </div>

                <h4>Linux环境配置</h4>
                <ol>
                    <li>配置ROS2环境。请按照<a href="https://github.com/NoManRobotics/ROS-setup/tree/main/ros2" target="_blank" style="text-decoration: underline;">这个快速安装指南</a>在对应Ubuntu版本上安装ROS2。您需要依照每一步骤在终端下完成安装。</li>
                    <li>MoveIt!是ROS中用于移动操作的软件包。检查MoveIt!是否配置成功。运行以下命令：
                        <pre><code>roslaunch panda_moveit_config demo.launch rviz_tutorial:=true</code></pre>
                        如果您愿意,可以按照MoveIt<a href="https://docs.ros.org/en/kinetic/api/moveit_tutorials/html/doc/quickstart_in_rviz/quickstart_in_rviz_tutorial.html" target="_blank" style="text-decoration: underline;">基础教程</a>进行操作。
                    </li>
                    <li>然后,您可以直接下载我们预处理完成的<a href="https://github.com/NoManRobotics" target="_blank" style="text-decoration: underline;">ROS2 workspace</a>,其中包括URDF文件和MoveIt2配置包。</li>
                    <li>创建配置包后，进入您的工作空间并编译：
                        <pre><code>cd ~/ros2_ws
colcon build
source install/setup.bash</code></pre>
                    </li>
                    <li>启动MoveIt2配置:
                        <pre><code>ros2 launch my_robot_moveit_config demo.launch.py</code></pre>
                    </li>
                    <li>在ROS2中，我们使用micro-ROS替代了ROS1中的rosserial。ESP32运行micro-ROS客户端，与ROS2节点进行通信。micro-ROS节点订阅<code>/joint_states</code>话题，将关节角度从弧度转换为度，并通过PWM控制舵机。有关micro-ROS的更多信息，请参考<a href="https://micro.ros.org/docs/tutorials/core/first_application_linux/" target="_blank" style="text-decoration: underline;">micro-ROS教程</a>。</li>

                    <li>通过USB物理连接机械臂:
                        <pre><code>ros2 launch my_robot_moveit_config demo.launch.py
sudo chmod 666 /dev/ttyUSB0
ros2 run micro_ros_agent micro_ros_agent serial --dev /dev/ttyUSB0 -b 115200</code></pre>
                    </li>
                    <li>现在您可以在RViz2中使用交互式标记控制机械臂，规划并执行运动。</li>
                </ol>


                <h4>Windows环境配置</h4>
                <ol>
                    <li>配置ROS2环境。在Windows系统下，我们使用<a href="https://chocolatey.org/install" target="_blank" style="text-decoration: underline;">Chocolatey</a>包管理器来安装ROS2。</li>
                    <li>打开拥有管理员权限的命令提示符并输入以下命令来通过Chocolatey安装Python：
                        <pre><code>choco install -y python --version 3.8.3</code></pre>
                        <div class="alert alert-warning">
                            <p>注意：Chocolatey会将Python安装在C:\Python38目录下，后续安装步骤都假定Python安装在该位置。如果您将Python安装在其他位置，必须将其复制或链接到此位置。</p>
                        </div>
                    </li>
                    <li>安装Visual C++运行时库。打开命令提示符并输入以下命令通过Chocolatey安装：
                        <pre><code>choco install -y vcredist2013 vcredist140</code></pre>
                    </li>
                    <li>安装OpenSSL：
                        <ol>
                            <li>从OpenSSL官网下载Win64 OpenSSL v1.1.1t安装包。请注意不要下载Win32或Light版本，也不要下载v3.X.Y版本的安装包。</li>
                            <li>OpenSSL官网已经不再支持预编译的1.1.1版本。您可在<a href="https://github.com/openssl/openssl/releases" target="_blank" style="text-decoration: underline;">OpenSSL releases</a>下载源码，或使用Chocolatey包管理器（推荐）安装OpenSSL 1.1.1：<pre><code>choco install openssl --version=1.1.1.1400</code></pre></li>
                            <li>打开命令提示符，运行以下命令设置环境变量：
                                <pre><code>setx /m OPENSSL_CONF "C:\Program Files\OpenSSL-Win64\bin\openssl.cfg"</code></pre>
                            </li>
                            <li>将OpenSSL添加到系统PATH：
                                <ul>
                                    <li>点击Windows图标，输入"Environment Variables"</li>
                                    <li>点击"编辑系统环境变量"</li>
                                    <li>在弹出的对话框中点击"环境变量"</li>
                                    <li>在下方窗格中选择"Path"变量并点击"编辑"</li>
                                    <li>添加以下路径：<code>C:\Program Files\OpenSSL-Win64\bin\</code></li>
                                </ul>
                            </li>
                        </ol>
                    </li>
                    <li>安装Visual Studio 2019：
                        <ol>
                            <li>如果您已经安装了Visual Studio 2019的付费版本（Professional或Enterprise），可以跳过此步骤。</li>
                            <li>Microsoft提供免费的VS 2019 Community版本。您可以通过<a href="https://visualstudio.microsoft.com/vs/older-downloads/" target="_blank" style="text-decoration: underline;">官方链接</a>下载安装程序。</li>
                            <li>确保安装Visual C++功能：
                                <ul>
                                    <li>在安装过程中选择"使用C++的桌面开发"工作流</li>
                                    <li>在安装组件列表中取消选择所有C++ CMake工具</li>
                                </ul>
                            </li>
                        </ol>
                    </li>
                    <li>安装OpenCV：
                        <ol>
                            <li>下载预编译的OpenCV 3.4.6版本：
                                <ul>
                                    <li>从<a href="https://github.com/ros2/ros2/releases/download/opencv-archives/opencv-3.4.6-vc16.VS2019.zip" target="_blank" style="text-decoration: underline;">此链接</a>下载OpenCV 3.4.6</li>
                                    <li>将下载的文件解压到<code>C:\opencv</code>目录</li>
                                </ul>
                            </li>
                            <li>以管理员权限打开命令提示符，运行以下命令设置环境变量：
                                <pre><code>setx /m OpenCV_DIR C:\opencv</code></pre>
                            </li>
                            <li>将OpenCV添加到系统环境变量PATH。添加以下路径：<code>C:\opencv\x64\vc16\bin</code>
                            </li>
                        </ol>
                    </li>
                    <li>安装CMake和其他依赖项：
                        <ol>
                            <li>使用Chocolatey安装CMake：
                                <pre><code>choco install -y cmake</code></pre>
                            </li>
                            <li>将CMake添加到系统环境变量PATH。添加以下路径：<code>C:\Program Files\CMake\bin</code>
                            </li>
                            <li>从<a href="https://github.com/ros2/choco-packages/releases/tag/2022-03-15" target="_blank" style="text-decoration: underline;">ROS2 Chocolatey包发布页面</a>下载以下包：
                                <ul>
                                    <li>asio.1.12.1.nupkg</li>
                                    <li>bullet.3.17.nupkg</li>
                                    <li>cunit.2.1.3.nupkg</li>
                                    <li>eigen.3.3.4.nupkg</li>
                                    <li>tinyxml-usestl.2.6.2.nupkg</li>
                                    <li>tinyxml2.6.0.0.nupkg</li>
                                </ul>
                            </li>
                            <li>以管理员权限打开命令提示符，运行以下命令安装这些包（请将 &lt;PATH\TO\DOWNLOADS&gt; 替换为您下载包的实际路径）：
                                <pre><code>choco install -y -s &lt;PATH\TO\DOWNLOADS&gt; asio cunit eigen tinyxml-usestl tinyxml2 bullet</code></pre>
                            </li>
                            <li>升级pip和setuptools：
                                <pre><code>python -m pip install -U pip setuptools==59.6.0</code></pre>
                            </li>
                            <li>安装ROS2所需的Python依赖：
                                <pre><code>python -m pip install -U catkin_pkg cryptography empy importlib-metadata jsonschema lark==1.1.1 lxml matplotlib netifaces numpy opencv-python PyQt5 pillow psutil pycairo pydot pyparsing==2.4.7 pyyaml rosdistro</code></pre>
                            </li>
                    </li>
                    <li>安装xmllint：
                        <ol>
                            <li>从 <a href="https://www.zlatkovic.com/projects/libxml/">https://www.zlatkovic.com/projects/libxml/</a> 下载以下64位二进制文件：
                                <ul>
                                    <li>iconv</li>
                                    <li>libxml2</li>
                                    <li>zlib</li>
                                </ul>
                            </li>
                            <li>将所有文件解压到 <code>C:\xmllint</code> 目录</li>
                            <li>将xmllint添加到系统环境变量PATH，添加以下路径：<code>C:\xmllint\bin</code>
                            </li>
                        </ol>
                    </li>
                    <li>安装Qt：
                        <ol>
                            <li>从<a href="https://www.qt.io/offline-installers" target="_blank" style="text-decoration: underline;">Qt官网</a>下载Qt 5.12.X离线安装包</li>
                            <li>运行安装程序，在Qt -> Qt 5.12.12目录下选择MSVC 2017 64-bit组件</li>
                            <li>以管理员权限打开命令提示符，设置以下环境变量（假设Qt安装在默认位置C:\Qt）：
                                <pre><code>setx /m Qt5_DIR C:\Qt\Qt5.12.12\5.12.12\msvc2017_64
setx /m QT_QPA_PLATFORM_PLUGIN_PATH C:\Qt\Qt5.12.12\5.12.12\msvc2017_64\plugins\platforms</code></pre>
                                <div class="alert alert-info">
                                    <p>注意：根据实际安装的MSVC版本、Qt安装目录和Qt版本，以上路径可能需要调整。</p>
                                </div>
                            </li>
                        </ol>
                    </li>
                    <li>安装Graphviz：
                        <ol>
                            <li>从<a href="https://graphviz.org/download/" target="_blank" style="text-decoration: underline;">Graphviz官网</a>下载Windows安装包</li>
                            <li>运行安装程序，在安装过程中选择将Graphviz添加到系统PATH（可以选择"当前用户"或"所有用户"）</li>
                            <div class="alert alert-info">
                                <p>注意：Graphviz是运行rqt_graph所必需的依赖项。</p>
                            </div>
                        </ol>
                    </li>
                    <li>下载并安装ROS2：
                        <ol>
                            <li>访问<a href="https://github.com/ros2/ros2/releases" target="_blank" style="text-decoration: underline;">ROS2发布页面</a></li>
                            <li>下载最新的Windows安装包（例如：ros2-package-windows-AMD64.zip）
                                <div class="alert alert-info">
                                    <p>注意：可能会有多个二进制下载选项，文件名可能会有所不同。</p>
                                </div>
                            </li>
                            <li>将下载的zip文件解压到指定目录（例如：C:\dev\ros2_humble）</li>
                        </ol>
                    </li>
                    <li>设置ROS2环境：
                        <ol>
                            <li>打开命令提示符，运行以下命令来设置ROS2工作空间：
                                <pre><code>call C:\dev\ros2_iron\local_setup.bat</code></pre>
                                <div class="alert alert-info">
                                    <p>注意：如果命令执行后出现一次"系统找不到指定的路径"的提示是正常现象，只要没有其他错误即可。</p>
                                </div>
                            </li>
                            <div class="alert alert-info">
                                <p>若您仍然遇到问题请尝试运行这个脚本修复环境和安装确实的依赖</p>
                            </div>
                        </ol>
                    </li>
                </ol>
            </section>


            <hr class="divider">
            <section id="item_2">
                <h1>Noman-app</h1>
                <p>Noman-app是一个轻量级、跨平台的机械臂用户界面。它为路径规划、碰撞避免和自动化提供了易用的解决方案。同时，后端结合了路径规划与自动化功能，如PTP、LIN和CIRC运动，这些功能通常出现在KRL和RoboDK等工业级应用中。</p>
                <p><strong>GitHub:</strong> <a href="https://github.com/NoManRobotics/noman-app" target="_blank" style="text-decoration: underline; color: purple;">https://github.com/NoManRobotics/noman-app</a></p>
                <p>Noman-app包含以下主要功能模块：</p>
                
                <ul>
                    <li><strong>机器人配置</strong> - 机器人描述和配置管理, 用于添加和配置第三方机械臂</li>
                    <li><strong>Controller控制器</strong> - 核心控制模块，提供基础的机械臂控制功能</li>
                    <li><strong>ROS接口</strong> - 与ROS系统的集成接口</li>
                    <li><strong>仿真器（Simulator）</strong> - 基于PyBullet的3D仿真环境</li>
                    <li><strong>Majordomo</strong> - LLM助手</li>
                    <li><strong>运动学模块</strong> - 处理机械臂正逆运动学计算，路径规划和工作区域分析</li>
                    <li><strong>专业指令模块</strong> - 撰写并编译专业机械臂指令用于自动化应用</li>
                    <li><strong>固件管理</strong> - 机械臂固件的更新与管理</li>
                </ul>
            </section>
            <hr class="divider">

            <!-- Robot Profile -->
            <section id="robot_profile">
                <h3>Robot Profile 配置</h3>
                <div class="alert alert-info">
                    <p>Robot Profile是Noman-app的机器人描述和配置管理系统，用于添加和配置第三方机械臂。</p>
                </div>

                <h4>配置步骤</h4>
                <ol>
                    <li><strong>增加配置</strong> - 点击左上角加号添加配置，需要用户导入机械臂的URDF/Xacro描述文件进行配置。注意，描述文件中的mesh推荐使用STL格式。</li>
                    <li><strong>配置关节组</strong> - 默认Group A为机械臂的main group，并对每个关节进行组分配。增加组以分配诸如末端工具等关节类型。
                        <div style="margin-top: 15px; margin-bottom: 15px; display: flex; gap: 15px; flex-wrap: wrap;">
                            <img src="/assets/images/abb_profile_a.png" alt="ABB机器人配置界面A" class="img-fluid" style="flex: 1; min-width: 300px; max-width: 48%; border: 1px solid #e9ecef; border-radius: 4px;">
                            <img src="/assets/images/abb_profile_b.png" alt="ABB机器人配置界面B" class="img-fluid" style="flex: 1; min-width: 300px; max-width: 48%; border: 1px solid #e9ecef; border-radius: 4px;">
                        </div>
                    </li>
                    <li><strong>归零位姿</strong> - 点击需要设置的main group后会在右侧显示所有该组关节，拖动滑块以设置机械臂默认的归零关节角度以及关节极限角度。</li>
                    <li><strong>配置末端</strong> - 当一个组不属于需要正逆求解的连续关节，我们将它分配为工具组。一般工具组中的关节类型不为Revolute。同时我们可以设置工具坐标偏移，以正确反映工具的预期到达点位姿。</li>
                </ol>
            </section>
            <hr class="divider">
      
            <!-- Controller -->
            <section id="controller" class="doc-section">
                <h3>Controller 控制器</h3>
                <div class="alert alert-info">
                    <p>控制器提供基础的功能：MINIMA配置、关节空间角度控制、轨迹录制与重播等。</p>
                </div>

                <h4>MINIMA 配置</h4>
                <p>Controller支持两种控制模式，适用于不同的应用场景：</p>
                
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>模式</th>
                            <th>描述</th>
                            <th>操作方式</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Serial Control 模式</strong></td>
                            <td>通过软件界面控制机械臂运动</td>
                            <td>
                                <ul>
                                    <li>使用滑块调整各关节角度</li>
                                    <li>点击<strong>Execute</strong>按钮执行运动</li>
                                    <li>机械臂将运动到设定的目标位置</li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <td><strong>Mini Controller 模式</strong></td>
                            <td>通过外部硬件进行遥操作控制</td>
                            <td>
                                <ul>
                                    <li>连接电位器等第三方硬件</li>
                                    <li>通过硬件实时控制关节角度</li>
                                    <li>此模式下<strong>Execute</strong>按钮不工作</li>
                                </ul>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <h4>记录和重播</h4>
                <p>Controller提供轨迹录制和重播功能，可用于示教编程和重复性任务。</p>

                <h5>录制流程</h5>
                <ol>
                    <li><strong>开始录制</strong> - 点击<strong>Recording</strong>按钮开始录制会话</li>
                    <li><strong>调整位置</strong> - 点击<strong>Execute</strong>按钮，机械臂会运动到当前设定的关节角度（临时位置）</li>
                    <li><strong>记录路点</strong> - 点击<strong>Record Once</strong>按钮记录当前临时位置
                        <ul>
                            <li><strong>注意：</strong>在点击Record Once之前，可以多次调整并Execute来确定理想的临时位置</li>
                        </ul>
                    </li>
                    <li><strong>延迟设置</strong> - 可以设置每次Record Once之间的延迟时间，控制轨迹执行速度</li>
                    <li><strong>停止录制</strong> - 点击<strong>Stop Recording</strong>按钮停止录制，系统会自动保存为JSON格式的关节轨迹文件</li>
                </ol>

                <div style="margin-top: 20px; margin-bottom: 20px; justify-content: center;">
                    <img src="/assets/images/controller_frame_a.png" alt="Controller界面" class="img-fluid" style="max-width: 90%; border: 1px solid #e9ecef; border-radius: 4px;">
                </div>

                <h5>重播流程</h5>
                <ol>
                    <li><strong>设置次数</strong> - 在输入框中设置重播次数</li>
                    <li><strong>开始重播</strong> - 点击<strong>Replay Trajectory</strong>按钮开始重播录制的关节轨迹</li>
                    <li><strong>暂停/继续</strong> - 运动过程中可以点击<strong>Stop</strong>按钮临时暂停，再次点击继续运动</li>
                </ol>

                <div class="alert alert-warning">
                    <h5>注意事项：</h5>
                    <ul>
                        <li>设置中的上下限校准需要配合控制器关节运动到极限/90°位置进行校准</li>
                        <li>切换控制模式前确保机械臂处于安全位置</li>
                        <li>录制轨迹时注意工作空间限制，避免碰撞</li>
                        <li>重播前请确保机械臂周围环境与录制时一致</li>
                    </ul>
                </div>

                <h4>第三方控制器</h4>
                <p>Controller支持第三方机械臂的配置和控制，具有高度的灵活性和适配性。</p>
                
                <table class="param-table">
                    <tbody>
                        <tr>
                            <td style="width: 35%;"><strong>自动适配关节数</strong></td>
                            <td style="width: 65%;">当使用第三方机械臂配置时，Controller中的关节滑轨会自动调整为与机械臂自由度一致的数量。例如，6轴机械臂会显示6个关节滑块，7轴机械臂会显示7个关节滑块。</td>
                        </tr>
                        <tr>
                            <td style="width: 35%;"><strong>通讯协议对照表</strong></td>
                            <td style="width: 65%;">右上角提供通讯协议对照表，便于用户快速适配Noman-app的通讯格式。对照表包含关节编号、数据格式、波特率等关键信息，帮助用户正确配置串口通讯参数。</td>
                        </tr>
                    </tbody>
                </table>

            </section>
            <hr class="divider">

            <!-- ROS -->
            <section id="ros">
                <h3>ROS接口</h3>
                <div class="alert alert-info">
                    <p>ROS接口模块提供了与ROS1和ROS2系统的集成功能，让用户能够通过ROS生态系统来控制和开发Minima机械臂应用。</p>
                </div>

                <h4>ROS配置</h4>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>功能</th>
                            <th>描述</th>
                            <th>参数</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>System Check</td>
                            <td>检查ROS环境配置</td>
                            <td>
                                <ul>
                                    <li>ROS版本检测</li>
                                    <li>依赖包检查</li>
                                    <li>工作空间验证</li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <td>Switch Mode</td>
                            <td>切换到ROS控制模式</td>
                            <td>
                                <ul>
                                    <li>ROS1模式</li>
                                    <li>ROS2模式</li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <td>URDF配置</td>
                            <td>机械臂模型配置</td>
                            <td>
                                <ul>
                                    <li>ROS1 URDF</li>
                                    <li>ROS2 URDF</li>
                                    <li>自定义URDF导入</li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <td>Workspace</td>
                            <td>工作空间配置</td>
                            <td>
                                <ul>
                                    <li>catkin_ws (ROS1)</li>
                                    <li>colcon_ws (ROS2)</li>
                                    <li>包管理</li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <td>MoveIt配置</td>
                            <td>运动规划配置</td>
                            <td>
                                <ul>
                                    <li>MoveIt Setup Assistant</li>
                                    <li>规划组配置</li>
                                    <li>控制器配置</li>
                                </ul>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <div class="alert alert-warning">
                    <h5>使用说明：</h5>
                    <ul>
                        <li>首次使用请先运行System Check确保环境正确置</li>
                        <li>切换ROS模式前请确保已完成相应版本的配置</li>
                        <li>URDF修改后需要重新运行MoveIt配置</li>
                        <li>建议参考ROS Wiki了解更多使用细节</li>
                    </ul>
                </div>
            </section>
            <hr class="divider">

            <!-- Kinematics -->
            <section id="kinematics">
                <h3>运动学模块</h3>
                <div class="alert alert-info">
                    <p>运动学模块提供了完整的机械臂运动学解算和路径规划功能，以及任务板进行示教编程。</p>
                </div>

                <h4>初始化</h4>
                <p>机械臂进行逆运动学求解时，需要配置以下关键参数：</p>

                <div style="margin-top: 20px; margin-bottom: 20px; text-align: center;">
                    <img src="/assets/images/kinematics_frame_a.png" alt="坐标系示意图" class="img-fluid" style="max-width: 90%; border: 1px solid #e9ecef; border-radius: 4px;">
                </div>

                <h5>1. 规划器 (Planner)</h5>
                <ul>
                    <li><strong>Direct（直接）</strong> - 无规划模式。直接从起点到终点，不进行路径避障规划。速度最快，但可能发生碰撞。</li>
                    <li><strong>RRT* (Rapidly-exploring Random Tree)</strong> - 基于采样的快速随机树路径规划算法。通过随机采样和树扩展来探索配置空间，寻找避免碰撞的路径。RRT*是对RRT的改进版本，具有渐进最优性。</li>
                    <li><strong>CHOMP (Covariant Hamiltonian Optimization for Motion Planning)</strong> - 协方差哈密顿优化运动规划算法。基于梯度优化方法，通过迭代优化轨迹来满足碰撞约束。CHOMP能够在高维配置空间中生成平滑、无碰撞的轨迹。</li>
                </ul>

                <h5>2. 求解器 (Solver)</h5>
                <ul>
                    <li><strong>Levenberg-Marquardt (默认)</strong> - 阻尼最小二乘方法，结合了高斯-牛顿法和梯度下降法的优势。适用于非线性优化问题，收敛速度快且稳定性好。</li>
                    <li><strong>Damped Least Square</strong> - 阻尼最小二乘求解器，通过引入阻尼项来改善雅可比矩阵奇异问题。在处理奇异配置时更稳健。</li>
                    <li><strong>TRAC-IK</strong> - 基于跟踪的逆运动学求解器，通过前向跟踪和反向搜索相结合，能够高效地找到逆运动学解。</li>
                    <li><strong>用户导入求解器</strong> - 用户可以根据需要导入自定义求解器。导入的求解器需符合特定格式要求，请参照custom solver样例进行配置。</li>
                </ul>

                <h5>3. 求解器参数</h5>
                <p>切换不同的求解器会有不同的参数设置选项，常见的参数包括：</p>
                <ul>
                    <li><strong>最大迭代次数 (Max Iterations)</strong> - 求解器的最大迭代次数，控制求解时间和精度的平衡。</li>
                    <li><strong>Epsilon (学习率)</strong> - 控制每次迭代的步长，影响收敛速度和稳定性。</li>
                    <li><strong>残差阈值 (Residual Threshold)</strong> - 判断收敛的误差阈值。</li>
                    <li><strong>Lambda参数</strong> - 仅在Levenberg-Marquardt算法中使用，用于平衡高斯-牛顿法和梯度下降法。</li>
                </ul>

                <h5>4. 路径点 (Path Points)</h5>
                <p>路径点定义了机械臂在从A点到B点时必须经过的途径点数量。当机械臂进行从A到B的逆运动学求解时，系统会：</p>
                <ul>
                    <li>根据设定的路径点数量，自动生成从A到B的中间路径点。</li>
                    <li>通过选定的规划器（如RRT*或CHOMP）进行避障路径规划。</li>
                    <li>使用内置的笛卡尔空间（Cartesian）插值方法，在路径点之间生成平滑的轨迹。</li>
                    <li>确保整个运动过程既满足避障要求，又保证运动的平滑性和精确性。</li>
                </ul>

                <h5>5. 检查自碰撞</h5>
                <p>类似于MoveIt Setup Assistant，通过采样在关节可达区域将关节组分为总是、偶尔、从不碰撞，自碰撞组为偶尔碰撞的关节组。该检查在初始化时执行，以便路径规划在考虑环境碰撞的同时避免自碰撞。</p>

                <div class="alert alert-warning">
                    <h5>注意事项：</h5>
                    <ul>
                        <li>Path Points设置较大会增加计算时间，建议根据实际需求调整</li>
                        <li>Direct模式不进行避障，仅适用于无障碍环境</li>
                    </ul>
                </div>

                <h4>坐标系 (Coordinate Frames)</h4>
                <div style="margin-top: 20px; margin-bottom: 20px; display: flex; gap: 15px; flex-wrap: wrap;">
                    <img src="/assets/images/base_frame.png" alt="Base基座坐标系" class="img-fluid" style="flex: 1; min-width: 300px; max-width: 43.2%; border: 1px solid #e9ecef; border-radius: 4px;">
                    <img src="/assets/images/tool_frame.png" alt="Tool工具坐标系" class="img-fluid" style="flex: 1; min-width: 300px; max-width: 43.2%; border: 1px solid #e9ecef; border-radius: 4px;">
                </div>
                <ul>
                    <li><strong>Base 基座坐标系</strong> - 基座坐标系以机械臂零点为原心的坐标系，一般以base link底部为中心。末端的XYZ和RPY位姿相对于这个点进行计算。这是默认的坐标系。</li>
                    <li><strong>工具坐标系 (Tool Frame)</strong> - 以末端法兰作为原心的坐标系。当机械臂的末端工具相对于法兰盘设置了XYZ或者RPY偏移，机械臂的运动将相对于法兰盘中心进行相对运动。这使得在更换不同工具时，无需重新调整整个运动轨迹，只需更新工具坐标系参数即可。</li>
                </ul>
            </section>
            <hr class="divider">

            <!-- Firmware -->
            <section id="firmware">
                <h3>固件管理</h3>
                <div class="alert alert-info">
                    <p>固件管理模块进行远程/本地固件更新。请连接串口，并保持烧录过程中的串口连接稳定。</p>
                </div>

                <h4>基本配置</h4>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>配置项</th>
                            <th>参数说明</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>开发板选择</td>
                            <td>
                                <ul>
                                    <li>ESP32</li>
                                    <li>Arduino</li>
                                </ul>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <h4>烧录参数</h4>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>开发板</th>
                            <th>参数设置</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>ESP32参数</td>
                            <td>
                                <ul>
                                    <li>波特率 (Baud Rate): 115200</li>
                                    <li>Flash模式 (Flash Mode): QIO</li>
                                    <li>Flash频率 (Flash Frequency): 40m</li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <td>Arduino参数</td>
                            <td>
                                <ul>
                                    <li>开发板型号 (Board Type): Uno</li>
                                    <li>波特率 (Baud Rate): 115200</li>
                                </ul>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <h4>固件更新</h4>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>更新方式</th>
                            <th>说明</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>自定义固件</td>
                            <td>上传本地.bin文件进行更新</td>
                        </tr>
                        <tr>
                            <td>远程固件</td>
                            <td>在线更新官方最新固件</td>
                        </tr>
                    </tbody>
                </table>

                <div class="alert alert-warning">
                    <h5>注意事项：</h5>
                    <ul>
                        <li>更新前请确认选择了正确的开发板类型</li>
                        <li>烧录过程中请勿断开设备连接</li>
                    </ul>
                </div>
            </section>
            <hr class="divider">

            <section id="item_3">
                <h3>Change Log</h3>
                <ul>
                    <li>
                        <strong>版本 1.2 (2024-10-21)</strong>
                        <ul>
                            <li>新增运动学模块，支持机械臂的正向和逆向运动学计算</li>
                            <li>UI界面优化</li>
                        </ul>
                    </li>
                    <li>
                        <strong>版本 1.1 (2023-09-21)</strong>
                        <ul>
                            <li>新增Anytroller模块, 支持自定义机械臂控制</li>
                            <li>新增固件管理界面</li>
                            <li>优化机械臂控制模式和ROS模式间的切换</li>
                        </ul>
                    </li>
                    <li>
                        <strong>版本 1.0 (2024-09-10)</strong>
                        <ul>
                            <li>Noman-app软件正式版发布</li>
                            <li>新增ROS集成功能</li>
                            <li>优化了Controller的用户界面</li>
                            <li>修复了一些已知的稳定性问题</li>
                        </ul>
                    </li>
                    <li>
                        <strong>版本 1.0-beta (2024-09-01)</strong>
                        <ul>
                            <li>Noman-app软件测试板发布</li>
                            <li>包含Controller基本功能</li>
                        </ul>
                    </li>
                </ul>
            </section>
            <hr class="divider">
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>
    // 添加导航切换功能
    document.querySelector('.nav-toggle').addEventListener('click', function() {
        document.querySelector('.idocs-navigation').classList.toggle('active');
    });

    // 点击内容区域时关闭导航栏（在移动设备上）
    document.querySelector('.idocs-content').addEventListener('click', function() {
        if (window.innerWidth <= 767) {
            document.querySelector('.idocs-navigation').classList.remove('active');
        }
    });

    // 激活滚动监听
    $('body').scrollspy({ target: '.idocs-navigation' });
</script>
</body>
</html>